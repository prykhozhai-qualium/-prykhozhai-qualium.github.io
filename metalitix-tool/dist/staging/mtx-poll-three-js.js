!function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.MetalitixLogger=s():t.MetalitixLogger=s()}(self,(()=>(()=>{"use strict";var t=[,(t,s,e)=>{e.r(s),e.d(s,{default:()=>c});var i=e(6),n=e(2),r=e(3),o=e(4),a=e(5),h=function(t,s,e,i){return new(e||(e=Promise))((function(n,r){function o(t){try{h(i.next(t))}catch(t){r(t)}}function a(t){try{h(i.throw(t))}catch(t){r(t)}}function h(t){var s;t.done?n(t.value):(s=t.value,s instanceof e?s:new e((function(t){t(s)}))).then(o,a)}h((i=i.apply(t,s||[])).next())}))};class c{constructor(t,s={}){this.interval=r.DEFAULT_INTERVAL_VALUE,this.customData={},this.object3D=null,this.setPollInterval=t=>{this.interval=Math.min(r.MAX_INTERVAL_VALUE,Math.max(r.MIN_INTERVAL_VALUE,t))},this.setCustomField=(t,s)=>{this.customData[t]=s},this.removeCustomField=t=>{delete this.customData[t]},this.getRecord=(t,s,{userEvent:e,userMeta:i,camera:n,data:r})=>{const a=Object.assign({},this.customData,r),h={object:"xr.analytics.record",appkey:this.appKey,apiver:this.apiVersion,sessionId:s,timestamp:Date.now(),data:a};if(t===o.XRAnalytics.EventTypes.SessionStart)return console.assert(void 0!==i,'"userMeta" is required for session start!'),console.assert(void 0!==n,'"camera" is required for session start!'),Object.assign({},h,{eventType:t,userMeta:i,camera:n});if(t===o.XRAnalytics.EventTypes.SessionUpdate)return console.assert(void 0!==i,'"userMeta" is required for session update!'),Object.assign({},h,{eventType:t,userMeta:i,camera:n});if(t===o.XRAnalytics.EventTypes.SessionEnd)return Object.assign({},h,{eventType:t,camera:n});if(t===o.XRAnalytics.EventTypes.UserPosition)return Object.assign({},h,{eventType:t});if(t===o.XRAnalytics.EventTypes.UserInteraction)return console.assert(void 0!==e,'"userEvent" is required for user interaction!'),Object.assign({},h,{eventType:t,userEvent:e});throw new Error("Unknown eventType: "+t)},this.addRecord=(t,{userEvent:s,userMeta:e,camera:i,data:n})=>{if(null===this.sessionId)return;const r=this.getRecord(t,this.sessionId,{userEvent:s,userMeta:e,camera:i,data:n});this.pollRecords.push(r)},this.sendPosition=(t=!1)=>h(this,void 0,void 0,(function*(){try{const s=this.pollRecords.slice(0,r.MAXIMUM_BATCH_RECORDS_LENGTH),e={object:"xr.analytics.batch.records",appkey:this.appKey,apiver:this.apiVersion,items:s};yield(0,n.sendXRAnalyticsData)(e),this.pollRecords=this.pollRecords.slice(r.MAXIMUM_BATCH_RECORDS_LENGTH),this.pollRecords.length>0&&t&&(yield this.sendPosition(!0)),this.lastPollTimestamp=Date.now()}catch(t){console.log("Something went wrong",t),this.forceStopLoop()}})),this.getUserMeta=()=>Object.assign({},this.userMeta,{userAgent:window.navigator.userAgent,pagePath:location.pathname,pageQuery:location.search}),this.addSessionStart=()=>{const t=this.getPositionData(this.object3D),s=this.getCameraData(this.object3D),e=this.getUserMeta();this.previousCameraData=s||null,void 0!==t&&this.addRecord(o.XRAnalytics.EventTypes.SessionStart,{data:t,camera:s,userMeta:e})},this.addSessionEnd=()=>{const t=this.getPositionData(this.object3D);let s=this.getCameraData(this.object3D);void 0!==t&&((0,a.deepEqual)(s,this.previousCameraData)&&(s=void 0),this.addRecord(o.XRAnalytics.EventTypes.SessionEnd,{data:t,camera:s}))},this.addUserPosition=()=>{const t=this.getPositionData(this.object3D);void 0!==t&&this.addRecord(o.XRAnalytics.EventTypes.UserPosition,{data:t})},this.addSessionUpdate=t=>{const s=this.getPositionData(this.object3D),e=this.getUserMeta();void 0!==s&&this.addRecord(o.XRAnalytics.EventTypes.SessionUpdate,{data:s,camera:t,userMeta:e})},this.sddNextUserPositionAndUpdateCameraIfNeeded=()=>{const t=this.getCameraData(this.object3D);void 0===t||(0,a.deepEqual)(t,this.previousCameraData)?this.addUserPosition():(this.addSessionUpdate(t),this.previousCameraData=t)},this.sendPositionLoop=(t=!1)=>{t||this.sddNextUserPositionAndUpdateCameraIfNeeded(),this.pollRecords.length>0&&(this.pollRecords.length>=r.MAXIMUM_BATCH_RECORDS_LENGTH||Date.now()-this.lastPollTimestamp>=r.MAXIMUM_BATCH_SENDING_INTERVAL)&&this.sendPosition(),null===this.sessionId&&0===this.pollRecords.length||(this.nextPoll=window.setTimeout((()=>this.sendPositionLoop()),this.interval))},this.forceStopLoop=()=>clearTimeout(this.nextPoll),this.clearSessionPollRecords=()=>{this.pollRecords=[]},this.handleVisibilityChange=()=>h(this,void 0,void 0,(function*(){return"hidden"===document.visibilityState?this.pauseSession():yield this.resumeSession()})),this.startSession=t=>{this.object3D=t,this.sessionId=(0,i.generateUUID)(),this.addSessionStart(),this.sendPositionLoop(!0),document.addEventListener("visibilitychange",this.handleVisibilityChange)},this.pauseSession=()=>(this.forceStopLoop(),this.sendPosition(!0)),this.resumeSession=()=>h(this,void 0,void 0,(function*(){if(Date.now()-this.lastPollTimestamp<=r.MAXIMUM_SESSION_KEEPALIVE_TIME)this.forceStopLoop(),this.sendPositionLoop();else if(null!==this.object3D){const t=this.object3D;yield this.endSession(),this.startSession(t)}})),this.endSession=()=>h(this,void 0,void 0,(function*(){null!==this.sessionId&&(this.addSessionEnd(),this.object3D=null,this.sessionId=null,this.previousCameraData=null,this.forceStopLoop(),yield this.sendPosition(!0),this.clearSessionPollRecords(),this.lastPollTimestamp=-1,document.removeEventListener("visibilitychange",this.handleVisibilityChange))})),this.updateUserMeta=t=>{void 0!==t&&(this.userMeta=t,this.addSessionUpdate())},this.sendUserEvent=(t,s,e,i,n)=>{const r=this.getPositionData(this.object3D),a={object:"user.event",eventName:t,eventType:s,target:e,points:i,params:n};void 0!==r&&this.addRecord(o.XRAnalytics.EventTypes.UserInteraction,{data:r,userEvent:a})},this.logCustomEvent=(t,s)=>{this.sendUserEvent(t,"custom",void 0,void 0,s)},this.logKeyDownEvent=(t,s,e)=>{this.sendUserEvent("key_down",o.XRAnalytics.UserInteractionTypes.KeyDown,{state:o.XRAnalytics.PointStates.Pressed,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logKeyPressEvent=(t,s,e)=>{this.sendUserEvent("key_press",o.XRAnalytics.UserInteractionTypes.KeyPress,{state:o.XRAnalytics.PointStates.Stationary,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logKeyUpEvent=(t,s,e)=>{this.sendUserEvent("key_up",o.XRAnalytics.UserInteractionTypes.KeyUp,{state:o.XRAnalytics.PointStates.Released,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logMouseEnterEvent=(t,s,e)=>{this.sendUserEvent("mouse_enter",o.XRAnalytics.UserInteractionTypes.MouseEnter,{state:o.XRAnalytics.PointStates.Stationary,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logMouseLeaveEvent=(t,s,e)=>{this.sendUserEvent("mouse_leave",o.XRAnalytics.UserInteractionTypes.MouseLeave,{state:o.XRAnalytics.PointStates.Stationary,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logMouseOverEvent=(t,s,e)=>{this.sendUserEvent("mouse_over",o.XRAnalytics.UserInteractionTypes.MouseOver,{state:o.XRAnalytics.PointStates.Stationary,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logMouseOutEvent=(t,s,e)=>{this.sendUserEvent("mouse_out",o.XRAnalytics.UserInteractionTypes.MouseOut,{state:o.XRAnalytics.PointStates.Stationary,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logMouseDownEvent=(t,s,e)=>{this.sendUserEvent("mouse_down",o.XRAnalytics.UserInteractionTypes.MouseDown,{state:o.XRAnalytics.PointStates.Pressed,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logMouseUpEvent=(t,s,e)=>{this.sendUserEvent("mouse_up",o.XRAnalytics.UserInteractionTypes.MouseUp,{state:o.XRAnalytics.PointStates.Released,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logMouseMoveEvent=(t,s,e)=>{this.sendUserEvent("mouse_move",o.XRAnalytics.UserInteractionTypes.MouseMove,{state:o.XRAnalytics.PointStates.Updated,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logMousePressEvent=(t,s,e)=>{this.sendUserEvent("mouse_press",o.XRAnalytics.UserInteractionTypes.MousePress,{state:o.XRAnalytics.PointStates.Stationary,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logTouchTapEvent=(t,s,e)=>{this.sendUserEvent("touch_tap",o.XRAnalytics.UserInteractionTypes.TouchTap,{state:o.XRAnalytics.PointStates.Stationary,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logTouchStartEvent=(t,s,e)=>{this.sendUserEvent("touch_start",o.XRAnalytics.UserInteractionTypes.TouchStart,{state:o.XRAnalytics.PointStates.Pressed,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logTouchMoveEvent=(t,s,e)=>{this.sendUserEvent("touch_move",o.XRAnalytics.UserInteractionTypes.TouchMove,{state:o.XRAnalytics.PointStates.Updated,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logTouchEndEvent=(t,s,e)=>{this.sendUserEvent("touch_end",o.XRAnalytics.UserInteractionTypes.TouchEnd,{state:o.XRAnalytics.PointStates.Released,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logZoomStartEvent=(t,s,e)=>{this.sendUserEvent("zoom_start",o.XRAnalytics.UserInteractionTypes.ZoomStart,{state:o.XRAnalytics.PointStates.Pressed,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logZoomUpdateEvent=(t,s,e)=>{this.sendUserEvent("zoom_update",o.XRAnalytics.UserInteractionTypes.ZoomUpdate,{state:o.XRAnalytics.PointStates.Updated,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)},this.logZoomEndEvent=(t,s,e)=>{this.sendUserEvent("zoom_end",o.XRAnalytics.UserInteractionTypes.ZoomEnd,{state:o.XRAnalytics.PointStates.Released,timestamp:Date.now(),position:{x:t,y:s}},void 0,e)};const{pollInterval:e=r.DEFAULT_INTERVAL_VALUE,apiVersion:c="v2",userMeta:l={}}=s;this.appKey=t,this.apiVersion=c,this.userMeta=l,this.setPollInterval(e),this.sessionId=null,this.previousCameraData=null,this.pollRecords=[],this.lastPollTimestamp=-1,this.nextPoll=-1}}},(t,s,e)=>{e.r(s),e.d(s,{sendXRAnalyticsData:()=>n});var i=e(3);function n(t){return s=this,e=void 0,r=function*(){return console.log("poll",t),fetch(`${i.API_URL}/xr-analytics`,{method:"POST",keepalive:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},new((n=void 0)||(n=Promise))((function(t,i){function o(t){try{h(r.next(t))}catch(t){i(t)}}function a(t){try{h(r.throw(t))}catch(t){i(t)}}function h(s){var e;s.done?t(s.value):(e=s.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}h((r=r.apply(s,e||[])).next())}));var s,e,n,r}},(t,s,e)=>{e.r(s),e.d(s,{API_ORIGIN:()=>r,API_URL:()=>a,API_VERSION:()=>o,DEFAULT_INTERVAL_VALUE:()=>l,MAXIMUM_BATCH_RECORDS_LENGTH:()=>u,MAXIMUM_BATCH_SENDING_INTERVAL:()=>y,MAXIMUM_SESSION_KEEPALIVE_TIME:()=>d,MAX_INTERVAL_VALUE:()=>c,MIN_INTERVAL_VALUE:()=>h,isProduction:()=>i,isStaging:()=>n});const i=!1,n=!0,r=i?"https://app.metalitix.com":n?"https://metalitix-staging.aircards.io":"https://metalitix-dev.aircards.io",o="v1",a=`${r}/api/${o}`,h=100,c=1e3,l=500,u=100,y=18e4,d=3e5},(t,s,e)=>{var i;e.r(s),e.d(s,{XRAnalytics:()=>i}),function(t){let s,e,i;!function(t){t.Pressed="state.pressed",t.Updated="state.updated",t.Released="state.released",t.Stationary="state.stationary"}(s=t.PointStates||(t.PointStates={})),t.KnownPointStates=Object.values(s),function(t){t.KeyDown="user.interaction.key_down",t.KeyPress="user.interaction.key_press",t.KeyUp="user.interaction.key_down",t.MouseEnter="user.interaction.mouse_enter",t.MouseLeave="user.interaction.mouse_leave",t.MouseOver="user.interaction.mouse_over",t.MouseOut="user.interaction.mouse_out",t.MouseDown="user.interaction.mouse_down",t.MouseUp="user.interaction.mouse_up",t.MouseMove="user.interaction.mouse_move",t.MousePress="user.interaction.mouse_press",t.TouchTap="user.interaction.touch_tap",t.TouchStart="user.interaction.touch_start",t.TouchMove="user.interaction.touch_move",t.TouchEnd="user.interaction.touch_end",t.ZoomStart="user.interaction.zoom_start",t.ZoomUpdate="user.interaction.zoom_update",t.ZoomEnd="user.interaction.zoom_end"}(e=t.UserInteractionTypes||(t.UserInteractionTypes={})),t.KnownUserInteractionTypes=Object.values(e),function(t){t.UserPosition="event.user.position",t.UserInteraction="event.user.interaction",t.SessionStart="event.session.start",t.SessionUpdate="event.session.update",t.SessionEnd="event.session.end"}(i=t.EventTypes||(t.EventTypes={})),t.KnownEventTypes=Object.values(i)}(i||(i={}))},(t,s,e)=>{function i(t,s){const e=Object.keys,n=typeof t;return t&&s&&"object"===n&&n===typeof s?e(t).length===e(s).length&&e(t).every((e=>i(t[e],s[e]))):t===s}function n(t){return t&&"object"==typeof t&&!Array.isArray(t)}function r(t,s){let e=Object.assign({},t);return n(t)&&n(s)&&Object.keys(s).forEach((i=>{n(s[i])?i in t?e[i]=r(t[i],s[i]):Object.assign(e,{[i]:s[i]}):Object.assign(e,{[i]:s[i]})})),e}e.r(s),e.d(s,{deepEqual:()=>i,isObject:()=>n,mergeDeep:()=>r})},(t,s,e)=>{e.r(s),e.d(s,{DEG2RAD:()=>r,RAD2DEG:()=>o,ceilPowerOfTwo:()=>w,clamp:()=>h,damp:()=>d,degToRad:()=>g,euclideanModulo:()=>c,floorPowerOfTwo:()=>b,generateUUID:()=>a,inverseLerp:()=>u,isPowerOfTwo:()=>f,lerp:()=>y,mapLinear:()=>l,pingpong:()=>m,radToDeg:()=>E,randFloat:()=>M,randFloatSpread:()=>z,randInt:()=>x,seededRandom:()=>v,setQuaternionFromProperEuler:()=>S,smootherstep:()=>p,smoothstep:()=>_});const i=[];for(let t=0;t<256;t++)i[t]=(t<16?"0":"")+t.toString(16);let n=1234567;const r=Math.PI/180,o=180/Math.PI;function a(){const t=4294967295*Math.random()|0,s=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(i[255&t]+i[t>>8&255]+i[t>>16&255]+i[t>>24&255]+"-"+i[255&s]+i[s>>8&255]+"-"+i[s>>16&15|64]+i[s>>24&255]+"-"+i[63&e|128]+i[e>>8&255]+"-"+i[e>>16&255]+i[e>>24&255]+i[255&n]+i[n>>8&255]+i[n>>16&255]+i[n>>24&255]).toUpperCase()}function h(t,s,e){return Math.max(s,Math.min(e,t))}function c(t,s){return(t%s+s)%s}function l(t,s,e,i,n){return i+(t-s)*(n-i)/(e-s)}function u(t,s,e){return t!==s?(e-t)/(s-t):0}function y(t,s,e){return(1-e)*t+e*s}function d(t,s,e,i){return y(t,s,1-Math.exp(-e*i))}function m(t,s=1){return s-Math.abs(c(t,2*s)-s)}function _(t,s,e){return t<=s?0:t>=e?1:(t=(t-s)/(e-s))*t*(3-2*t)}function p(t,s,e){return t<=s?0:t>=e?1:(t=(t-s)/(e-s))*t*t*(t*(6*t-15)+10)}function x(t,s){return t+Math.floor(Math.random()*(s-t+1))}function M(t,s){return t+Math.random()*(s-t)}function z(t){return t*(.5-Math.random())}function v(t){return void 0!==t&&(n=t%2147483647),n=16807*n%2147483647,(n-1)/2147483646}function g(t){return t*r}function E(t){return t*o}function f(t){return 0==(t&t-1)&&0!==t}function w(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function b(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function S(t,s,e,i,n){const r=Math.cos,o=Math.sin,a=r(e/2),h=o(e/2),c=r((s+i)/2),l=o((s+i)/2),u=r((s-i)/2),y=o((s-i)/2),d=r((i-s)/2),m=o((i-s)/2);switch(n){case"XYX":t.set(a*l,h*u,h*y,a*c);break;case"YZY":t.set(h*y,a*l,h*u,a*c);break;case"ZXZ":t.set(h*u,h*y,a*l,a*c);break;case"XZX":t.set(a*l,h*m,h*d,a*c);break;case"YXY":t.set(h*d,a*l,h*m,a*c);break;case"ZYZ":t.set(h*m,h*d,a*l,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}},(t,s,e)=>{e.r(s),e.d(s,{Vector3:()=>r});var i=e(6),n=e(8);class r{constructor(t=0,s=0,e=0){this.x=t,this.y=s,this.z=e}set(t,s,e){return void 0===e&&(e=this.z),this.x=t,this.y=s,this.z=e,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,s){switch(t){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,s){return void 0!==s?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,s)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,s){return this.x=t.x+s.x,this.y=t.y+s.y,this.z=t.z+s.z,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this}sub(t,s){return void 0!==s?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,s)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,s){return this.x=t.x-s.x,this.y=t.y-s.y,this.z=t.z-s.z,this}multiply(t,s){return void 0!==s?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,s)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,s){return this.x=t.x*s.x,this.y=t.y*s.y,this.z=t.z*s.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(a.setFromEuler(t))}applyAxisAngle(t,s){return this.applyQuaternion(a.setFromAxisAngle(t,s))}applyMatrix3(t){const s=this.x,e=this.y,i=this.z,n=t.elements;return this.x=n[0]*s+n[3]*e+n[6]*i,this.y=n[1]*s+n[4]*e+n[7]*i,this.z=n[2]*s+n[5]*e+n[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const s=this.x,e=this.y,i=this.z,n=t.elements,r=1/(n[3]*s+n[7]*e+n[11]*i+n[15]);return this.x=(n[0]*s+n[4]*e+n[8]*i+n[12])*r,this.y=(n[1]*s+n[5]*e+n[9]*i+n[13])*r,this.z=(n[2]*s+n[6]*e+n[10]*i+n[14])*r,this}applyQuaternion(t){const s=this.x,e=this.y,i=this.z,n=t.x,r=t.y,o=t.z,a=t.w,h=a*s+r*i-o*e,c=a*e+o*s-n*i,l=a*i+n*e-r*s,u=-n*s-r*e-o*i;return this.x=h*a+u*-n+c*-o-l*-r,this.y=c*a+u*-r+l*-n-h*-o,this.z=l*a+u*-o+h*-r-c*-n,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const s=this.x,e=this.y,i=this.z,n=t.elements;return this.x=n[0]*s+n[4]*e+n[8]*i,this.y=n[1]*s+n[5]*e+n[9]*i,this.z=n[2]*s+n[6]*e+n[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,s){return this.x=Math.max(t.x,Math.min(s.x,this.x)),this.y=Math.max(t.y,Math.min(s.y,this.y)),this.z=Math.max(t.z,Math.min(s.z,this.z)),this}clampScalar(t,s){return this.x=Math.max(t,Math.min(s,this.x)),this.y=Math.max(t,Math.min(s,this.y)),this.z=Math.max(t,Math.min(s,this.z)),this}clampLength(t,s){const e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(s,e)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,s){return this.x+=(t.x-this.x)*s,this.y+=(t.y-this.y)*s,this.z+=(t.z-this.z)*s,this}lerpVectors(t,s,e){return this.x=t.x+(s.x-t.x)*e,this.y=t.y+(s.y-t.y)*e,this.z=t.z+(s.z-t.z)*e,this}cross(t,s){return void 0!==s?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,s)):this.crossVectors(this,t)}crossVectors(t,s){const e=t.x,i=t.y,n=t.z,r=s.x,o=s.y,a=s.z;return this.x=i*a-n*o,this.y=n*r-e*a,this.z=e*o-i*r,this}projectOnVector(t){const s=t.lengthSq();if(0===s)return this.set(0,0,0);const e=t.dot(this)/s;return this.copy(t).multiplyScalar(e)}projectOnPlane(t){return o.copy(this).projectOnVector(t),this.sub(o)}reflect(t){return this.sub(o.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const s=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===s)return Math.PI/2;const e=this.dot(t)/s;return Math.acos(i.clamp(e,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const s=this.x-t.x,e=this.y-t.y,i=this.z-t.z;return s*s+e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,s,e){const i=Math.sin(s)*t;return this.x=i*Math.sin(e),this.y=Math.cos(s)*t,this.z=i*Math.cos(e),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,s,e){return this.x=t*Math.sin(s),this.y=e,this.z=t*Math.cos(s),this}setFromMatrixPosition(t){const s=t.elements;return this.x=s[12],this.y=s[13],this.z=s[14],this}setFromMatrixScale(t){const s=this.setFromMatrixColumn(t,0).length(),e=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=s,this.y=e,this.z=i,this}setFromMatrixColumn(t,s){return this.fromArray(t.elements,4*s)}setFromMatrix3Column(t,s){return this.fromArray(t.elements,3*s)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,s=0){return this.x=t[s],this.y=t[s+1],this.z=t[s+2],this}toArray(t=[],s=0){return t[s]=this.x,t[s+1]=this.y,t[s+2]=this.z,t}fromBufferAttribute(t,s,e){return void 0!==e&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(s),this.y=t.getY(s),this.z=t.getZ(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),s=Math.random()*Math.PI*2,e=Math.sqrt(1-t**2);return this.x=e*Math.cos(s),this.y=e*Math.sin(s),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}r.prototype.isVector3=!0;const o=new r,a=new n.Quaternion},(t,s,e)=>{e.r(s),e.d(s,{Quaternion:()=>n});var i=e(6);class n{constructor(t=0,s=0,e=0,i=1){this._x=t,this._y=s,this._z=e,this._w=i}static slerp(t,s,e,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),e.slerpQuaternions(t,s,i)}static slerpFlat(t,s,e,i,n,r,o){let a=e[i+0],h=e[i+1],c=e[i+2],l=e[i+3];const u=n[r+0],y=n[r+1],d=n[r+2],m=n[r+3];if(0===o)return t[s+0]=a,t[s+1]=h,t[s+2]=c,void(t[s+3]=l);if(1===o)return t[s+0]=u,t[s+1]=y,t[s+2]=d,void(t[s+3]=m);if(l!==m||a!==u||h!==y||c!==d){let t=1-o;const s=a*u+h*y+c*d+l*m,e=s>=0?1:-1,i=1-s*s;if(i>Number.EPSILON){const n=Math.sqrt(i),r=Math.atan2(n,s*e);t=Math.sin(t*r)/n,o=Math.sin(o*r)/n}const n=o*e;if(a=a*t+u*n,h=h*t+y*n,c=c*t+d*n,l=l*t+m*n,t===1-o){const t=1/Math.sqrt(a*a+h*h+c*c+l*l);a*=t,h*=t,c*=t,l*=t}}t[s]=a,t[s+1]=h,t[s+2]=c,t[s+3]=l}static multiplyQuaternionsFlat(t,s,e,i,n,r){const o=e[i],a=e[i+1],h=e[i+2],c=e[i+3],l=n[r],u=n[r+1],y=n[r+2],d=n[r+3];return t[s]=o*d+c*l+a*y-h*u,t[s+1]=a*d+c*u+h*l-o*y,t[s+2]=h*d+c*y+o*u-a*l,t[s+3]=c*d-o*l-a*u-h*y,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,s,e,i){return this._x=t,this._y=s,this._z=e,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,s){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const e=t._x,i=t._y,n=t._z,r=t._order,o=Math.cos,a=Math.sin,h=o(e/2),c=o(i/2),l=o(n/2),u=a(e/2),y=a(i/2),d=a(n/2);switch(r){case"XYZ":this._x=u*c*l+h*y*d,this._y=h*y*l-u*c*d,this._z=h*c*d+u*y*l,this._w=h*c*l-u*y*d;break;case"YXZ":this._x=u*c*l+h*y*d,this._y=h*y*l-u*c*d,this._z=h*c*d-u*y*l,this._w=h*c*l+u*y*d;break;case"ZXY":this._x=u*c*l-h*y*d,this._y=h*y*l+u*c*d,this._z=h*c*d+u*y*l,this._w=h*c*l-u*y*d;break;case"ZYX":this._x=u*c*l-h*y*d,this._y=h*y*l+u*c*d,this._z=h*c*d-u*y*l,this._w=h*c*l+u*y*d;break;case"YZX":this._x=u*c*l+h*y*d,this._y=h*y*l+u*c*d,this._z=h*c*d-u*y*l,this._w=h*c*l-u*y*d;break;case"XZY":this._x=u*c*l-h*y*d,this._y=h*y*l-u*c*d,this._z=h*c*d+u*y*l,this._w=h*c*l+u*y*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return!1!==s&&this._onChangeCallback(),this}setFromAxisAngle(t,s){const e=s/2,i=Math.sin(e);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(e),this._onChangeCallback(),this}setFromRotationMatrix(t){const s=t.elements,e=s[0],i=s[4],n=s[8],r=s[1],o=s[5],a=s[9],h=s[2],c=s[6],l=s[10],u=e+o+l;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(c-a)*t,this._y=(n-h)*t,this._z=(r-i)*t}else if(e>o&&e>l){const t=2*Math.sqrt(1+e-o-l);this._w=(c-a)/t,this._x=.25*t,this._y=(i+r)/t,this._z=(n+h)/t}else if(o>l){const t=2*Math.sqrt(1+o-e-l);this._w=(n-h)/t,this._x=(i+r)/t,this._y=.25*t,this._z=(a+c)/t}else{const t=2*Math.sqrt(1+l-e-o);this._w=(r-i)/t,this._x=(n+h)/t,this._y=(a+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,s){let e=t.dot(s)+1;return e<Number.EPSILON?(e=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=e):(this._x=0,this._y=-t.z,this._z=t.y,this._w=e)):(this._x=t.y*s.z-t.z*s.y,this._y=t.z*s.x-t.x*s.z,this._z=t.x*s.y-t.y*s.x,this._w=e),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(i.clamp(this.dot(t),-1,1)))}rotateTowards(t,s){const e=this.angleTo(t);if(0===e)return this;const i=Math.min(1,s/e);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,s){return void 0!==s?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,s)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,s){const e=t._x,i=t._y,n=t._z,r=t._w,o=s._x,a=s._y,h=s._z,c=s._w;return this._x=e*c+r*o+i*h-n*a,this._y=i*c+r*a+n*o-e*h,this._z=n*c+r*h+e*a-i*o,this._w=r*c-e*o-i*a-n*h,this._onChangeCallback(),this}slerp(t,s){if(0===s)return this;if(1===s)return this.copy(t);const e=this._x,i=this._y,n=this._z,r=this._w;let o=r*t._w+e*t._x+i*t._y+n*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=r,this._x=e,this._y=i,this._z=n,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-s;return this._w=t*r+s*this._w,this._x=t*e+s*this._x,this._y=t*i+s*this._y,this._z=t*n+s*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(a),c=Math.atan2(h,o),l=Math.sin((1-s)*c)/h,u=Math.sin(s*c)/h;return this._w=r*l+this._w*u,this._x=e*l+this._x*u,this._y=i*l+this._y*u,this._z=n*l+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,s,e){this.copy(t).slerp(s,e)}random(){const t=Math.random(),s=Math.sqrt(1-t),e=Math.sqrt(t),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(s*Math.cos(i),e*Math.sin(n),e*Math.cos(n),s*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,s=0){return this._x=t[s],this._y=t[s+1],this._z=t[s+2],this._w=t[s+3],this._onChangeCallback(),this}toArray(t=[],s=0){return t[s]=this._x,t[s+1]=this._y,t[s+2]=this._z,t[s+3]=this._w,t}fromBufferAttribute(t,s){return this._x=t.getX(s),this._y=t.getY(s),this._z=t.getZ(s),this._w=t.getW(s),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}n.prototype.isQuaternion=!0},(t,s,e)=>{e.r(s),e.d(s,{Euler:()=>c});var i=e(8),n=e(7),r=e(10),o=e(6);const a=new r.Matrix4,h=new i.Quaternion;class c{constructor(t=0,s=0,e=0,i=c.DefaultOrder){this._x=t,this._y=s,this._z=e,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,s,e,i=this._order){return this._x=t,this._y=s,this._z=e,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,s=this._order,e=!0){const i=t.elements,n=i[0],r=i[4],a=i[8],h=i[1],c=i[5],l=i[9],u=i[2],y=i[6],d=i[10];switch(s){case"XYZ":this._y=Math.asin((0,o.clamp)(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-r,n)):(this._x=Math.atan2(y,c),this._z=0);break;case"YXZ":this._x=Math.asin(-(0,o.clamp)(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(h,c)):(this._y=Math.atan2(-u,n),this._z=0);break;case"ZXY":this._x=Math.asin((0,o.clamp)(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-r,c)):(this._y=0,this._z=Math.atan2(h,n));break;case"ZYX":this._y=Math.asin(-(0,o.clamp)(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(y,d),this._z=Math.atan2(h,n)):(this._x=0,this._z=Math.atan2(-r,c));break;case"YZX":this._z=Math.asin((0,o.clamp)(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,n)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-(0,o.clamp)(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(y,c),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===e&&this._onChangeCallback(),this}setFromQuaternion(t,s,e){return a.makeRotationFromQuaternion(t),this.setFromRotationMatrix(a,s,e)}setFromVector3(t,s=this._order){return this.set(t.x,t.y,t.z,s)}reorder(t){return h.setFromEuler(this),this.setFromQuaternion(h,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],s=0){return t[s]=this._x,t[s+1]=this._y,t[s+2]=this._z,t[s+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new n.Vector3(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}c.prototype.isEuler=!0,c.DefaultOrder="XYZ",c.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"]},(t,s,e)=>{e.r(s),e.d(s,{Matrix4:()=>n});var i=e(7);class n{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,s,e,i,n,r,o,a,h,c,l,u,y,d,m,_){const p=this.elements;return p[0]=t,p[4]=s,p[8]=e,p[12]=i,p[1]=n,p[5]=r,p[9]=o,p[13]=a,p[2]=h,p[6]=c,p[10]=l,p[14]=u,p[3]=y,p[7]=d,p[11]=m,p[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new n).fromArray(this.elements)}copy(t){const s=this.elements,e=t.elements;return s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=e[7],s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=e[11],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],this}copyPosition(t){const s=this.elements,e=t.elements;return s[12]=e[12],s[13]=e[13],s[14]=e[14],this}setFromMatrix3(t){const s=t.elements;return this.set(s[0],s[3],s[6],0,s[1],s[4],s[7],0,s[2],s[5],s[8],0,0,0,0,1),this}extractBasis(t,s,e){return t.setFromMatrixColumn(this,0),s.setFromMatrixColumn(this,1),e.setFromMatrixColumn(this,2),this}makeBasis(t,s,e){return this.set(t.x,s.x,e.x,0,t.y,s.y,e.y,0,t.z,s.z,e.z,0,0,0,0,1),this}extractRotation(t){const s=this.elements,e=t.elements,i=1/r.setFromMatrixColumn(t,0).length(),n=1/r.setFromMatrixColumn(t,1).length(),o=1/r.setFromMatrixColumn(t,2).length();return s[0]=e[0]*i,s[1]=e[1]*i,s[2]=e[2]*i,s[3]=0,s[4]=e[4]*n,s[5]=e[5]*n,s[6]=e[6]*n,s[7]=0,s[8]=e[8]*o,s[9]=e[9]*o,s[10]=e[10]*o,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const s=this.elements,e=t.x,i=t.y,n=t.z,r=Math.cos(e),o=Math.sin(e),a=Math.cos(i),h=Math.sin(i),c=Math.cos(n),l=Math.sin(n);if("XYZ"===t.order){const t=r*c,e=r*l,i=o*c,n=o*l;s[0]=a*c,s[4]=-a*l,s[8]=h,s[1]=e+i*h,s[5]=t-n*h,s[9]=-o*a,s[2]=n-t*h,s[6]=i+e*h,s[10]=r*a}else if("YXZ"===t.order){const t=a*c,e=a*l,i=h*c,n=h*l;s[0]=t+n*o,s[4]=i*o-e,s[8]=r*h,s[1]=r*l,s[5]=r*c,s[9]=-o,s[2]=e*o-i,s[6]=n+t*o,s[10]=r*a}else if("ZXY"===t.order){const t=a*c,e=a*l,i=h*c,n=h*l;s[0]=t-n*o,s[4]=-r*l,s[8]=i+e*o,s[1]=e+i*o,s[5]=r*c,s[9]=n-t*o,s[2]=-r*h,s[6]=o,s[10]=r*a}else if("ZYX"===t.order){const t=r*c,e=r*l,i=o*c,n=o*l;s[0]=a*c,s[4]=i*h-e,s[8]=t*h+n,s[1]=a*l,s[5]=n*h+t,s[9]=e*h-i,s[2]=-h,s[6]=o*a,s[10]=r*a}else if("YZX"===t.order){const t=r*a,e=r*h,i=o*a,n=o*h;s[0]=a*c,s[4]=n-t*l,s[8]=i*l+e,s[1]=l,s[5]=r*c,s[9]=-o*c,s[2]=-h*c,s[6]=e*l+i,s[10]=t-n*l}else if("XZY"===t.order){const t=r*a,e=r*h,i=o*a,n=o*h;s[0]=a*c,s[4]=-l,s[8]=h*c,s[1]=t*l+n,s[5]=r*c,s[9]=e*l-i,s[2]=i*l-e,s[6]=o*c,s[10]=n*l+t}return s[3]=0,s[7]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromQuaternion(t){return this.compose(a,t,h)}lookAt(t,s,e){const i=this.elements;return u.subVectors(t,s),0===u.lengthSq()&&(u.z=1),u.normalize(),c.crossVectors(e,u),0===c.lengthSq()&&(1===Math.abs(e.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),c.crossVectors(e,u)),c.normalize(),l.crossVectors(u,c),i[0]=c.x,i[4]=l.x,i[8]=u.x,i[1]=c.y,i[5]=l.y,i[9]=u.y,i[2]=c.z,i[6]=l.z,i[10]=u.z,this}multiply(t,s){return void 0!==s?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,s)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,s){const e=t.elements,i=s.elements,n=this.elements,r=e[0],o=e[4],a=e[8],h=e[12],c=e[1],l=e[5],u=e[9],y=e[13],d=e[2],m=e[6],_=e[10],p=e[14],x=e[3],M=e[7],z=e[11],v=e[15],g=i[0],E=i[4],f=i[8],w=i[12],b=i[1],S=i[5],R=i[9],T=i[13],A=i[2],U=i[6],C=i[10],P=i[14],X=i[3],D=i[7],I=i[11],k=i[15];return n[0]=r*g+o*b+a*A+h*X,n[4]=r*E+o*S+a*U+h*D,n[8]=r*f+o*R+a*C+h*I,n[12]=r*w+o*T+a*P+h*k,n[1]=c*g+l*b+u*A+y*X,n[5]=c*E+l*S+u*U+y*D,n[9]=c*f+l*R+u*C+y*I,n[13]=c*w+l*T+u*P+y*k,n[2]=d*g+m*b+_*A+p*X,n[6]=d*E+m*S+_*U+p*D,n[10]=d*f+m*R+_*C+p*I,n[14]=d*w+m*T+_*P+p*k,n[3]=x*g+M*b+z*A+v*X,n[7]=x*E+M*S+z*U+v*D,n[11]=x*f+M*R+z*C+v*I,n[15]=x*w+M*T+z*P+v*k,this}multiplyScalar(t){const s=this.elements;return s[0]*=t,s[4]*=t,s[8]*=t,s[12]*=t,s[1]*=t,s[5]*=t,s[9]*=t,s[13]*=t,s[2]*=t,s[6]*=t,s[10]*=t,s[14]*=t,s[3]*=t,s[7]*=t,s[11]*=t,s[15]*=t,this}determinant(){const t=this.elements,s=t[0],e=t[4],i=t[8],n=t[12],r=t[1],o=t[5],a=t[9],h=t[13],c=t[2],l=t[6],u=t[10],y=t[14];return t[3]*(+n*a*l-i*h*l-n*o*u+e*h*u+i*o*y-e*a*y)+t[7]*(+s*a*y-s*h*u+n*r*u-i*r*y+i*h*c-n*a*c)+t[11]*(+s*h*l-s*o*y-n*r*l+e*r*y+n*o*c-e*h*c)+t[15]*(-i*o*c-s*a*l+s*o*u+i*r*l-e*r*u+e*a*c)}transpose(){const t=this.elements;let s;return s=t[1],t[1]=t[4],t[4]=s,s=t[2],t[2]=t[8],t[8]=s,s=t[6],t[6]=t[9],t[9]=s,s=t[3],t[3]=t[12],t[12]=s,s=t[7],t[7]=t[13],t[13]=s,s=t[11],t[11]=t[14],t[14]=s,this}setPosition(t,s,e){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=s,i[14]=e),this}invert(){const t=this.elements,s=t[0],e=t[1],i=t[2],n=t[3],r=t[4],o=t[5],a=t[6],h=t[7],c=t[8],l=t[9],u=t[10],y=t[11],d=t[12],m=t[13],_=t[14],p=t[15],x=l*_*h-m*u*h+m*a*y-o*_*y-l*a*p+o*u*p,M=d*u*h-c*_*h-d*a*y+r*_*y+c*a*p-r*u*p,z=c*m*h-d*l*h+d*o*y-r*m*y-c*o*p+r*l*p,v=d*l*a-c*m*a-d*o*u+r*m*u+c*o*_-r*l*_,g=s*x+e*M+i*z+n*v;if(0===g)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/g;return t[0]=x*E,t[1]=(m*u*n-l*_*n-m*i*y+e*_*y+l*i*p-e*u*p)*E,t[2]=(o*_*n-m*a*n+m*i*h-e*_*h-o*i*p+e*a*p)*E,t[3]=(l*a*n-o*u*n-l*i*h+e*u*h+o*i*y-e*a*y)*E,t[4]=M*E,t[5]=(c*_*n-d*u*n+d*i*y-s*_*y-c*i*p+s*u*p)*E,t[6]=(d*a*n-r*_*n-d*i*h+s*_*h+r*i*p-s*a*p)*E,t[7]=(r*u*n-c*a*n+c*i*h-s*u*h-r*i*y+s*a*y)*E,t[8]=z*E,t[9]=(d*l*n-c*m*n-d*e*y+s*m*y+c*e*p-s*l*p)*E,t[10]=(r*m*n-d*o*n+d*e*h-s*m*h-r*e*p+s*o*p)*E,t[11]=(c*o*n-r*l*n-c*e*h+s*l*h+r*e*y-s*o*y)*E,t[12]=v*E,t[13]=(c*m*i-d*l*i+d*e*u-s*m*u-c*e*_+s*l*_)*E,t[14]=(d*o*i-r*m*i-d*e*a+s*m*a+r*e*_-s*o*_)*E,t[15]=(r*l*i-c*o*i+c*e*a-s*l*a-r*e*u+s*o*u)*E,this}scale(t){const s=this.elements,e=t.x,i=t.y,n=t.z;return s[0]*=e,s[4]*=i,s[8]*=n,s[1]*=e,s[5]*=i,s[9]*=n,s[2]*=e,s[6]*=i,s[10]*=n,s[3]*=e,s[7]*=i,s[11]*=n,this}getMaxScaleOnAxis(){const t=this.elements,s=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],e=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(s,e,i))}makeTranslation(t,s,e){return this.set(1,0,0,t,0,1,0,s,0,0,1,e,0,0,0,1),this}makeRotationX(t){const s=Math.cos(t),e=Math.sin(t);return this.set(1,0,0,0,0,s,-e,0,0,e,s,0,0,0,0,1),this}makeRotationY(t){const s=Math.cos(t),e=Math.sin(t);return this.set(s,0,e,0,0,1,0,0,-e,0,s,0,0,0,0,1),this}makeRotationZ(t){const s=Math.cos(t),e=Math.sin(t);return this.set(s,-e,0,0,e,s,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,s){const e=Math.cos(s),i=Math.sin(s),n=1-e,r=t.x,o=t.y,a=t.z,h=n*r,c=n*o;return this.set(h*r+e,h*o-i*a,h*a+i*o,0,h*o+i*a,c*o+e,c*a-i*r,0,h*a-i*o,c*a+i*r,n*a*a+e,0,0,0,0,1),this}makeScale(t,s,e){return this.set(t,0,0,0,0,s,0,0,0,0,e,0,0,0,0,1),this}makeShear(t,s,e,i,n,r){return this.set(1,e,n,0,t,1,r,0,s,i,1,0,0,0,0,1),this}compose(t,s,e){const i=this.elements,n=s._x,r=s._y,o=s._z,a=s._w,h=n+n,c=r+r,l=o+o,u=n*h,y=n*c,d=n*l,m=r*c,_=r*l,p=o*l,x=a*h,M=a*c,z=a*l,v=e.x,g=e.y,E=e.z;return i[0]=(1-(m+p))*v,i[1]=(y+z)*v,i[2]=(d-M)*v,i[3]=0,i[4]=(y-z)*g,i[5]=(1-(u+p))*g,i[6]=(_+x)*g,i[7]=0,i[8]=(d+M)*E,i[9]=(_-x)*E,i[10]=(1-(u+m))*E,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,s,e){const i=this.elements;let n=r.set(i[0],i[1],i[2]).length();const a=r.set(i[4],i[5],i[6]).length(),h=r.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),t.x=i[12],t.y=i[13],t.z=i[14],o.copy(this);const c=1/n,l=1/a,u=1/h;return o.elements[0]*=c,o.elements[1]*=c,o.elements[2]*=c,o.elements[4]*=l,o.elements[5]*=l,o.elements[6]*=l,o.elements[8]*=u,o.elements[9]*=u,o.elements[10]*=u,s.setFromRotationMatrix(o),e.x=n,e.y=a,e.z=h,this}makePerspective(t,s,e,i,n,r){void 0===r&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,a=2*n/(s-t),h=2*n/(e-i),c=(s+t)/(s-t),l=(e+i)/(e-i),u=-(r+n)/(r-n),y=-2*r*n/(r-n);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=h,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=y,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,s,e,i,n,r){const o=this.elements,a=1/(s-t),h=1/(e-i),c=1/(r-n),l=(s+t)*a,u=(e+i)*h,y=(r+n)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-y,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const s=this.elements,e=t.elements;for(let t=0;t<16;t++)if(s[t]!==e[t])return!1;return!0}fromArray(t,s=0){for(let e=0;e<16;e++)this.elements[e]=t[e+s];return this}toArray(t=[],s=0){const e=this.elements;return t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3],t[s+4]=e[4],t[s+5]=e[5],t[s+6]=e[6],t[s+7]=e[7],t[s+8]=e[8],t[s+9]=e[9],t[s+10]=e[10],t[s+11]=e[11],t[s+12]=e[12],t[s+13]=e[13],t[s+14]=e[14],t[s+15]=e[15],t}}n.prototype.isMatrix4=!0;const r=new i.Vector3,o=new n,a=new i.Vector3(0,0,0),h=new i.Vector3(1,1,1),c=new i.Vector3,l=new i.Vector3,u=new i.Vector3}],s={};function e(i){var n=s[i];if(void 0!==n)return n.exports;var r=s[i]={exports:{}};return t[i](r,r.exports,e),r.exports}e.d=(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},e.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{e.r(i),e.d(i,{default:()=>o});var t=e(7),s=e(9),n=e(8),r=e(1);class o extends r.default{constructor(e,i={}){super(e,i),this.getPositionData=t=>{if(null!==t)return t.getWorldPosition(this.vector3),t.getWorldQuaternion(this.quaternion),this.euler.setFromQuaternion(this.quaternion),{position:{x:this.vector3.x,y:this.vector3.y,z:this.vector3.z},direction:{x:this.euler.x,y:this.euler.y,z:this.euler.z}}},this.getCameraData=t=>{if(null!==t)return{fieldOfView:t.fov,aspectRatio:t.aspect,zNearPlane:t.near,zFarPlane:t.far}},this.updateCameraObject=t=>{this.object3D=t},this.vector3=new t.Vector3,this.euler=new s.Euler,this.quaternion=new n.Quaternion}}})(),i.default})()));
//# sourceMappingURL=mtx-poll-three-js.js.map