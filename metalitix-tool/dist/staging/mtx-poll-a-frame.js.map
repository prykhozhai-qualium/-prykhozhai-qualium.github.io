{"version":3,"file":"mtx-poll-a-frame.js","mappings":"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","sources":["webpack://MetalitixLogger/webpack/universalModuleDefinition","webpack://MetalitixLogger/./src/lib/mtx-poll-base.ts","webpack://MetalitixLogger/./src/services/index.ts","webpack://MetalitixLogger/./src/constants/index.ts","webpack://MetalitixLogger/./src/types/index.ts","webpack://MetalitixLogger/./src/utils/index.ts","webpack://MetalitixLogger/./node_modules/three/src/math/MathUtils.js","webpack://MetalitixLogger/./node_modules/three/src/math/Vector3.js","webpack://MetalitixLogger/./node_modules/three/src/math/Quaternion.js","webpack://MetalitixLogger/./node_modules/three/src/math/Euler.js","webpack://MetalitixLogger/./node_modules/three/src/math/Matrix4.js","webpack://MetalitixLogger/webpack/bootstrap","webpack://MetalitixLogger/webpack/runtime/define property getters","webpack://MetalitixLogger/webpack/runtime/hasOwnProperty shorthand","webpack://MetalitixLogger/webpack/runtime/make namespace object","webpack://MetalitixLogger/./src/lib/mtx-poll-a-frame.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MetalitixLogger\"] = factory();\n\telse\n\t\troot[\"MetalitixLogger\"] = factory();\n})(self, () => {\nreturn ","import { generateUUID } from 'three/src/math/MathUtils';\nimport { sendXRAnalyticsData } from '../services';\nimport {\n  DEFAULT_INTERVAL_VALUE,\n  MAX_INTERVAL_VALUE,\n  MAXIMUM_BATCH_RECORDS_LENGTH,\n  MAXIMUM_BATCH_SENDING_INTERVAL,\n  MAXIMUM_SESSION_KEEPALIVE_TIME,\n  MIN_INTERVAL_VALUE,\n} from '../constants';\nimport { MetalitixLoggerOptions, XRAnalytics } from '../types';\nimport { deepEqual } from '../utils';\n\nexport default abstract class MetalitixLoggerBase<T> {\n  private appKey: string;\n  private apiVersion: string;\n  private interval: number = DEFAULT_INTERVAL_VALUE;\n  private sessionId: string | null;\n  private pollRecords: XRAnalytics.Record[];\n  private lastPollTimestamp: number;\n  private nextPoll: number;\n  private pollInProgress: boolean;\n  private previousCameraData: XRAnalytics.UserCamera | null;\n  private customData: { [key: string]: any } = {};\n  private userMeta: Partial<XRAnalytics.UserMetadata>;\n  protected object3D: T | null = null;\n\n  constructor(appKey: string, options: MetalitixLoggerOptions = {}) {\n    const { pollInterval = DEFAULT_INTERVAL_VALUE, apiVersion = 'v2', userMeta = {} } = options;\n    this.appKey = appKey;\n    this.apiVersion = apiVersion;\n    this.userMeta = userMeta;\n    this.setPollInterval(pollInterval);\n    this.sessionId = null;\n    this.previousCameraData = null;\n    this.pollRecords = [];\n    this.lastPollTimestamp = -1;\n    this.pollInProgress = false;\n    this.nextPoll = -1;\n  }\n\n  public setPollInterval = (pollInterval: number) => {\n    this.interval = Math.min(MAX_INTERVAL_VALUE, Math.max(MIN_INTERVAL_VALUE, pollInterval));\n  };\n\n  public setCustomField = (key: string, value: any) => {\n    this.customData[key] = value;\n  };\n\n  public removeCustomField = (key: string) => {\n    delete this.customData[key];\n  };\n\n  private getRecord = (\n    eventType: XRAnalytics.EventTypes,\n    sessionId: string,\n    { userEvent, userMeta, camera, data }: XRAnalytics.RecordDataFields,\n  ) => {\n    const resultData = Object.assign({}, this.customData, data);\n\n    const base: XRAnalytics.RecordBase = {\n      object: 'xr.analytics.record',\n      appkey: this.appKey,\n      apiver: this.apiVersion,\n      sessionId,\n      timestamp: Date.now(),\n      data: resultData,\n    };\n\n    if (eventType === XRAnalytics.EventTypes.SessionStart) {\n      console.assert(userMeta !== undefined, '\"userMeta\" is required for session start!');\n      console.assert(camera !== undefined, '\"camera\" is required for session start!');\n      return Object.assign({}, base, { eventType, userMeta, camera }) as XRAnalytics.SessionStartRecord;\n    }\n\n    if (eventType === XRAnalytics.EventTypes.SessionUpdate) {\n      console.assert(userMeta !== undefined, '\"userMeta\" is required for session update!');\n      return Object.assign({}, base, { eventType, userMeta, camera }) as XRAnalytics.SessionUpdateRecord;\n    }\n\n    if (eventType === XRAnalytics.EventTypes.SessionEnd) {\n      return Object.assign({}, base, { eventType, camera }) as XRAnalytics.SessionEndRecord;\n    }\n\n    if (eventType === XRAnalytics.EventTypes.UserPosition) {\n      return Object.assign({}, base, { eventType }) as XRAnalytics.UserPositionRecord;\n    }\n\n    if (eventType === XRAnalytics.EventTypes.UserInteraction) {\n      console.assert(userEvent !== undefined, '\"userEvent\" is required for user interaction!');\n      return Object.assign({}, base, { eventType, userEvent }) as XRAnalytics.UserInteractionRecord;\n    }\n\n    throw new Error('Unknown eventType: ' + eventType);\n  };\n\n  private addRecord = (\n    eventType: XRAnalytics.EventTypes,\n    { userEvent, userMeta, camera, data }: XRAnalytics.RecordDataFields,\n  ) => {\n    if (this.sessionId === null) {\n      return;\n    }\n\n    const record = this.getRecord(eventType, this.sessionId, { userEvent, userMeta, camera, data });\n\n    this.pollRecords.push(record);\n  };\n\n  private sendPosition = async (sendAll = false) => {\n    this.pollInProgress = true;\n\n    try {\n      const items = this.pollRecords.slice(0, MAXIMUM_BATCH_RECORDS_LENGTH);\n\n      const batchRecordsData = {\n        object: 'xr.analytics.batch.records',\n        appkey: this.appKey,\n        apiver: this.apiVersion,\n        items,\n      };\n\n      await sendXRAnalyticsData(batchRecordsData);\n      this.pollRecords = this.pollRecords.slice(MAXIMUM_BATCH_RECORDS_LENGTH);\n\n      if (this.pollRecords.length > 0 && sendAll) {\n        await this.sendPosition(true);\n      }\n\n      this.lastPollTimestamp = Date.now();\n    } catch (error) {\n      console.log('Something went wrong', error);\n      this.forceStopLoop();\n    } finally {\n      this.pollInProgress = false;\n    }\n  };\n\n  protected abstract getPositionData: (object3D: T | null) => XRAnalytics.Data | undefined;\n  protected abstract getCameraData: (object3D: T | null) => XRAnalytics.UserCamera | undefined;\n\n  private getUserMeta = (): Partial<XRAnalytics.UserMetadata> => {\n    return Object.assign({}, this.userMeta, {\n      userAgent: window.navigator.userAgent,\n      pagePath: location.pathname,\n      pageQuery: location.search,\n    });\n  };\n\n  private addSessionStart = () => {\n    const data = this.getPositionData(this.object3D);\n    const camera = this.getCameraData(this.object3D);\n    const userMeta = this.getUserMeta();\n    this.previousCameraData = camera || null;\n\n    if (data === undefined) {\n      return;\n    }\n\n    this.addRecord(XRAnalytics.EventTypes.SessionStart, { data, camera, userMeta });\n  };\n  private addSessionEnd = () => {\n    const data = this.getPositionData(this.object3D);\n    let camera = this.getCameraData(this.object3D);\n\n    if (data === undefined) {\n      return;\n    }\n\n    if (deepEqual(camera, this.previousCameraData)) {\n      /** Don't send the camera object if it was not changed */\n      camera = undefined;\n    }\n\n    this.addRecord(XRAnalytics.EventTypes.SessionEnd, { data, camera });\n  };\n  private addUserPosition = () => {\n    const data = this.getPositionData(this.object3D);\n\n    if (data === undefined) {\n      return;\n    }\n\n    this.addRecord(XRAnalytics.EventTypes.UserPosition, { data });\n  };\n  private addSessionUpdate = (camera?: XRAnalytics.UserCamera) => {\n    const data = this.getPositionData(this.object3D);\n    const userMeta = this.getUserMeta();\n\n    if (data === undefined) {\n      return;\n    }\n\n    this.addRecord(XRAnalytics.EventTypes.SessionUpdate, { data, camera, userMeta });\n  };\n\n  private sddNextUserPositionAndUpdateCameraIfNeeded = () => {\n    const camera = this.getCameraData(this.object3D);\n\n    if (camera === undefined || deepEqual(camera, this.previousCameraData)) {\n      this.addUserPosition();\n    } else {\n      this.addSessionUpdate(camera);\n      this.previousCameraData = camera;\n    }\n  };\n\n  private sendPositionLoop = (start = false) => {\n    /** Don't push position twice on session start */\n    if (!start) {\n      this.sddNextUserPositionAndUpdateCameraIfNeeded();\n    }\n\n    if (\n      !this.pollInProgress &&\n      this.pollRecords.length > 0 &&\n      (this.pollRecords.length >= MAXIMUM_BATCH_RECORDS_LENGTH ||\n        Date.now() - this.lastPollTimestamp >= MAXIMUM_BATCH_SENDING_INTERVAL)\n    ) {\n      this.sendPosition();\n    }\n\n    /** Stop polling data if session was ended and there is nothing to send */\n    if (this.sessionId === null && this.pollRecords.length === 0) {\n      return;\n    }\n\n    this.nextPoll = window.setTimeout(() => this.sendPositionLoop(), this.interval);\n  };\n\n  private forceStopLoop = () => clearTimeout(this.nextPoll);\n\n  private clearSessionPollRecords = () => {\n    this.pollRecords = [];\n  };\n\n  private handleVisibilityChange = async () => {\n    /**\n     *  If user close or switch the browser tab - we need to pause the session\n     *  Then if user came back to the browser - we need to try to resume the session if it's possible or start new one\n     **/\n    return document.visibilityState === 'hidden' ? this.pauseSession() : await this.resumeSession();\n  };\n\n  public startSession = (object3D: T) => {\n    this.object3D = object3D;\n    this.sessionId = generateUUID();\n    this.addSessionStart();\n    this.sendPositionLoop(true);\n    document.addEventListener('visibilitychange', this.handleVisibilityChange);\n  };\n\n  public pauseSession = () => {\n    /** If the session was paused we need to send all our data and stop collecting new items */\n    this.forceStopLoop();\n    return this.sendPosition(true);\n  };\n\n  public resumeSession = async () => {\n    if (this.lastPollTimestamp < 0 || Date.now() - this.lastPollTimestamp <= MAXIMUM_SESSION_KEEPALIVE_TIME) {\n      /** If the session was resumed on time - we need to continue collect current session data */\n      this.forceStopLoop(); // in case if session was not paused\n      this.sendPositionLoop();\n    } else if (this.object3D !== null) {\n      /** If the session was resumed when server already has closed the session - we need to start new session */\n      const object3D = this.object3D;\n      await this.endSession();\n      this.startSession(object3D);\n    }\n  };\n\n  public endSession = async () => {\n    if (this.sessionId === null) {\n      /** The session was already ended */\n      return;\n    }\n\n    this.addSessionEnd();\n    this.object3D = null;\n    this.sessionId = null;\n    this.previousCameraData = null;\n    this.forceStopLoop();\n    await this.sendPosition(true);\n    this.clearSessionPollRecords();\n    this.lastPollTimestamp = -1;\n    document.removeEventListener('visibilitychange', this.handleVisibilityChange);\n  };\n\n  public updateUserMeta = (userMeta: Partial<XRAnalytics.UserMetadata>) => {\n    if (userMeta === undefined) {\n      return;\n    }\n\n    this.userMeta = userMeta;\n\n    this.addSessionUpdate();\n  };\n\n  private sendUserEvent = (\n    eventName: string,\n    eventType: XRAnalytics.UserInteractionTypes | string,\n    target?: string | XRAnalytics.EventPoint | any,\n    points?: XRAnalytics.EventPoint[],\n    params?: object,\n  ) => {\n    const data = this.getPositionData(this.object3D);\n    const userEvent: XRAnalytics.UserEvent = {\n      object: 'user.event',\n      eventName,\n      eventType,\n      target,\n      points,\n      params,\n    };\n\n    if (data === undefined) {\n      return;\n    }\n\n    this.addRecord(XRAnalytics.EventTypes.UserInteraction, { data, userEvent });\n  };\n\n  public logCustomEvent = (eventName: string, params: object) => {\n    this.sendUserEvent(eventName, 'custom', undefined, undefined, params);\n  };\n\n  public logKeyDownEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'key_down',\n      XRAnalytics.UserInteractionTypes.KeyDown,\n      {\n        state: XRAnalytics.PointStates.Pressed,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logKeyPressEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'key_press',\n      XRAnalytics.UserInteractionTypes.KeyPress,\n      {\n        state: XRAnalytics.PointStates.Stationary,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logKeyUpEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'key_up',\n      XRAnalytics.UserInteractionTypes.KeyUp,\n      {\n        state: XRAnalytics.PointStates.Released,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logMouseEnterEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'mouse_enter',\n      XRAnalytics.UserInteractionTypes.MouseEnter,\n      {\n        state: XRAnalytics.PointStates.Stationary,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logMouseLeaveEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'mouse_leave',\n      XRAnalytics.UserInteractionTypes.MouseLeave,\n      {\n        state: XRAnalytics.PointStates.Stationary,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logMouseOverEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'mouse_over',\n      XRAnalytics.UserInteractionTypes.MouseOver,\n      {\n        state: XRAnalytics.PointStates.Stationary,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logMouseOutEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'mouse_out',\n      XRAnalytics.UserInteractionTypes.MouseOut,\n      {\n        state: XRAnalytics.PointStates.Stationary,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logMouseDownEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'mouse_down',\n      XRAnalytics.UserInteractionTypes.MouseDown,\n      {\n        state: XRAnalytics.PointStates.Pressed,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logMouseUpEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'mouse_up',\n      XRAnalytics.UserInteractionTypes.MouseUp,\n      {\n        state: XRAnalytics.PointStates.Released,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logMouseMoveEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'mouse_move',\n      XRAnalytics.UserInteractionTypes.MouseMove,\n      {\n        state: XRAnalytics.PointStates.Updated,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logMousePressEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'mouse_press',\n      XRAnalytics.UserInteractionTypes.MousePress,\n      {\n        state: XRAnalytics.PointStates.Stationary,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logTouchTapEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'touch_tap',\n      XRAnalytics.UserInteractionTypes.TouchTap,\n      {\n        state: XRAnalytics.PointStates.Stationary,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logTouchStartEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'touch_start',\n      XRAnalytics.UserInteractionTypes.TouchStart,\n      {\n        state: XRAnalytics.PointStates.Pressed,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logTouchMoveEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'touch_move',\n      XRAnalytics.UserInteractionTypes.TouchMove,\n      {\n        state: XRAnalytics.PointStates.Updated,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logTouchEndEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'touch_end',\n      XRAnalytics.UserInteractionTypes.TouchEnd,\n      {\n        state: XRAnalytics.PointStates.Released,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logZoomStartEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'zoom_start',\n      XRAnalytics.UserInteractionTypes.ZoomStart,\n      {\n        state: XRAnalytics.PointStates.Pressed,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logZoomUpdateEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'zoom_update',\n      XRAnalytics.UserInteractionTypes.ZoomUpdate,\n      {\n        state: XRAnalytics.PointStates.Updated,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n\n  public logZoomEndEvent = (x: number, y: number, params?: object) => {\n    this.sendUserEvent(\n      'zoom_end',\n      XRAnalytics.UserInteractionTypes.ZoomEnd,\n      {\n        state: XRAnalytics.PointStates.Released,\n        timestamp: Date.now(),\n        position: { x, y },\n      },\n      undefined,\n      params,\n    );\n  };\n}\n","import { API_URL } from '../constants';\nimport { XRAnalytics } from '../types';\n\nexport async function sendXRAnalyticsData(data: XRAnalytics.Record | XRAnalytics.BatchRecord) {\n  console.log('poll', data);\n\n  return fetch(`${API_URL}/xr-analytics`, {\n    method: 'POST',\n    keepalive: true,\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(data),\n  });\n}\n","export const isProduction = process.env.NODE_ENV === 'production';\nexport const isStaging = process.env.NODE_ENV === 'staging';\nexport const API_ORIGIN = isProduction\n  ? 'https://app.metalitix.com'\n  : isStaging\n  ? 'https://metalitix-staging.aircards.io'\n  : 'https://metalitix-dev.aircards.io';\nexport const API_VERSION = 'v1';\nexport const API_URL = `${API_ORIGIN}/api/${API_VERSION}`;\n\nexport const MIN_INTERVAL_VALUE = 100;\nexport const MAX_INTERVAL_VALUE = 1000;\nexport const DEFAULT_INTERVAL_VALUE = 500;\n\nexport const MAXIMUM_BATCH_RECORDS_LENGTH = 100;\n/** Wait maximum 3 minutes if limit of MAXIMUM_BATCH_RECORDS_LENGTH was not reached */\nexport const MAXIMUM_BATCH_SENDING_INTERVAL = 3 * 60 * 1000;\n/** Maximum server keepalive time since last successful pull data to the server */\nexport const MAXIMUM_SESSION_KEEPALIVE_TIME = 5 * 60 * 1000;\n","export interface MetalitixLoggerOptions {\n  pollInterval?: number;\n  apiVersion?: string;\n  userMeta?: Partial<XRAnalytics.UserMetadata>;\n}\n\nexport interface Vector2D {\n  x: number;\n  y: number;\n}\n\nexport interface Vector3D {\n  x: number;\n  y: number;\n  z: number;\n}\n\nexport namespace XRAnalytics {\n  export enum PointStates {\n    Pressed = 'state.pressed',\n    Updated = 'state.updated',\n    Released = 'state.released',\n    Stationary = 'state.stationary',\n  }\n\n  export const KnownPointStates = Object.values(PointStates);\n\n  export enum UserInteractionTypes {\n    KeyDown = 'user.interaction.key_down',\n    KeyPress = 'user.interaction.key_press',\n    KeyUp = 'user.interaction.key_down',\n    MouseEnter = 'user.interaction.mouse_enter',\n    MouseLeave = 'user.interaction.mouse_leave',\n    MouseOver = 'user.interaction.mouse_over',\n    MouseOut = 'user.interaction.mouse_out',\n    MouseDown = 'user.interaction.mouse_down',\n    MouseUp = 'user.interaction.mouse_up',\n    MouseMove = 'user.interaction.mouse_move',\n    MousePress = 'user.interaction.mouse_press',\n    TouchTap = 'user.interaction.touch_tap',\n    TouchStart = 'user.interaction.touch_start',\n    TouchMove = 'user.interaction.touch_move',\n    TouchEnd = 'user.interaction.touch_end',\n    ZoomStart = 'user.interaction.zoom_start',\n    ZoomUpdate = 'user.interaction.zoom_update',\n    ZoomEnd = 'user.interaction.zoom_end',\n  }\n\n  export const KnownUserInteractionTypes = Object.values(UserInteractionTypes);\n\n  /**\n   * XR Analytic Log Record Event Point\n   * - describes event point params\n   * @typedef {object} XRAnalyticEventPoint\n   * @property {string} state - point state\n   * @property {number} timestamp - timestamp in msec or ISO string\n   * @property {oneOf|Vector2D|Vector3D} timestamp - timestamp in msec or ISO string\n   */\n  export interface EventPoint {\n    state: PointStates;\n    timestamp: number;\n    position: Vector2D | Vector3D;\n  }\n\n  /**\n   * XR Analytic Log Record User Event\n   * - describes user events params\n   * @typedef {object} XRAnalyticUserEvent\n   * @property {string} object - `user.event`\n   * @property {string} eventName - human-readable event name\n   * @property {string} eventType - event type identifier\n   * @property {string} target - optional field which describes target of this event\n   * @property {array<XRAnalyticEventPoint>} points - multiple points (for multi-touch) or single point\n   * @property {object} params - any additional params\n   */\n  export interface UserEvent {\n    object: string;\n    eventName: string;\n    eventType: UserInteractionTypes | string;\n    target?: string | EventPoint | any;\n    points?: EventPoint[];\n    params?: object;\n  }\n\n  export enum EventTypes {\n    UserPosition = 'event.user.position',\n    UserInteraction = 'event.user.interaction',\n    SessionStart = 'event.session.start',\n    SessionUpdate = 'event.session.update',\n    SessionEnd = 'event.session.end',\n  }\n\n  export const KnownEventTypes = Object.values(EventTypes);\n\n  /**\n   * XR Analytic Log Record User Camera\n   * - describes user camera params\n   * @typedef {object} XRAnalyticUserCamera\n   * @property {number} fieldOfView\n   * @property {number} aspectRatio\n   * @property {number} zNearPlane\n   * @property {number} zFarPlane\n   */\n  export interface UserCamera {\n    fieldOfView: number;\n    aspectRatio: number;\n    zNearPlane: number;\n    zFarPlane: number;\n  }\n\n  /**\n   * XR Analytic Log Record User Metadata\n   * - can contain different fields related to user client.\n   * These list of fields is approximate and all fields are optional.\n   * @typedef {object} XRAnalyticUserMetadata\n   * @property {string} ipAddress - user ip address\n   * @property {string} geolocation - user geolocation\n   * @property {string} userAgent - user client user-agent string\n   * @property {string} pagePath - current page\n   * @property {string} pageQuery - current query params\n   * @property {string} sceneName - current scene name\n   * @property {string} gameLocation - current map / in-game location\n   * @property {object} systemInfo - free dictionary of sys info (like OS ver or etc.)\n   * @property {object} params - any additional params\n   */\n  export interface UserMetadata {\n    ipAddress: string;\n    geolocation: string;\n    userAgent: string;\n    pagePath: string;\n    pageQuery: string;\n    sceneName: string;\n    gameLocation: string;\n    systemInfo: object;\n    params: object;\n  }\n\n  /**\n   * XR Analytic Log Record User Position\n   * - contain position, direction and optionally any additional custom fields\n   * @typedef {object} XRAnalyticRecordData\n   * @property {Vector3D} position - user position\n   * @property {Vector3D} direction - look at direction\n   */\n  export interface Data {\n    position: Vector3D;\n    direction: Vector3D;\n    [k: string]: any;\n  }\n\n  /**\n   * XR Analytic Log RecordBase\n   * @typedef {object} XRAnalyticRecord\n   * @property {string} appkey - project API key\n   * @property {string} apiver - expected to be `'v2'`\n   * @property {string} sessionId - session uuid\n   * @property {number} timestamp - timestamp in msec or ISO string date\n   * @property {XRAnalyticRecordData} data - user position and direction on the scene. Can contain any additional custom fields.\n   */\n  export interface RecordBase {\n    object: string;\n    sessionId: string;\n    timestamp: number;\n    appkey: string;\n    apiver: string;\n    data: Data;\n  }\n\n  /**\n   * XR Analytic Log RecordDataFields\n   * @typedef {object} XRAnalyticRecord\n   * @property {XRAnalyticRecordData} data - user position and direction on the scene. Can contain any additional custom fields.\n   * @property {XRAnalyticUserMetadata} userMeta - field describing client metadata, actual for `event.user.session.start` and `event.user.session.update` events\n   * @property {XRAnalyticUserCamera} camera - field describing user camera, actual for `event.user.session.start` and `event.user.session.update` events\n   * @property {XRAnalyticUserEvent} userEvent - field describing event, actual for `event.user.interaction` events\n   */\n  export interface RecordDataFields {\n    data: Data;\n    userMeta?: Partial<UserMetadata>;\n    camera?: UserCamera;\n    userEvent?: UserEvent;\n  }\n\n  /**\n   * XR Analytic Log SessionStartRecord\n   * @typedef {object} XRAnalyticRecord\n   * @property {string} eventType - EventTypes.SessionStart event type\n   * @property {string} appkey - project API key\n   * @property {string} apiver - expected to be `'v2'`\n   * @property {string} sessionId - session uuid\n   * @property {number} timestamp - timestamp in msec or ISO string date\n   * @property {XRAnalyticUserMetadata} userMeta - required field describing client metadata, actual for `event.user.session.start` and `event.user.session.update` events\n   * @property {XRAnalyticUserCamera} camera - required field describing user camera, actual for `event.user.session.start` and `event.user.session.update` events\n   * @property {XRAnalyticRecordData} data - user position and direction on the scene. Can contain any additional custom fields.\n   */\n  export interface SessionStartRecord extends RecordBase {\n    eventType: EventTypes.SessionStart;\n    userMeta: Partial<UserMetadata>;\n    camera: UserCamera;\n  }\n\n  /**\n   * XR Analytic Log SessionUpdateRecord\n   * @typedef {object} XRAnalyticRecord\n   * @property {string} eventType - EventTypes.SessionUpdate event type\n   * @property {string} appkey - project API key\n   * @property {string} apiver - expected to be `'v2'`\n   * @property {string} sessionId - session uuid\n   * @property {number} timestamp - timestamp in msec or ISO string date\n   * @property {XRAnalyticUserMetadata} userMeta - required field describing client metadata, actual for `event.user.session.start` and `event.user.session.update` events\n   * @property {XRAnalyticUserCamera} camera - optional field describing user camera, actual for `event.user.session.start` and `event.user.session.update` events\n   * @property {XRAnalyticRecordData} data - user position and direction on the scene. Can contain any additional custom fields.\n   */\n  export interface SessionUpdateRecord extends RecordBase {\n    eventType: EventTypes.SessionUpdate;\n    userMeta: Partial<UserMetadata>;\n    camera?: UserCamera;\n  }\n\n  /**\n   * XR Analytic Log SessionEndRecord\n   * @typedef {object} XRAnalyticRecord\n   * @property {string} eventType - EventTypes.SessionEnd event type\n   * @property {string} appkey - project API key\n   * @property {string} apiver - expected to be `'v2'`\n   * @property {string} sessionId - session uuid\n   * @property {number} timestamp - timestamp in msec or ISO string date\n   * @property {XRAnalyticUserCamera} camera - optional field describing user camera, actual for `event.user.session.start` and `event.user.session.update` events\n   * @property {XRAnalyticRecordData} data - user position and direction on the scene. Can contain any additional custom fields.\n   */\n  export interface SessionEndRecord extends RecordBase {\n    eventType: EventTypes.SessionEnd;\n    camera?: UserCamera;\n  }\n\n  /**\n   * XR Analytic Log UserPositionRecord\n   * @typedef {object} XRAnalyticRecord\n   * @property {string} eventType - EventTypes.UserPosition event type\n   * @property {string} appkey - project API key\n   * @property {string} apiver - expected to be `'v2'`\n   * @property {string} sessionId - session uuid\n   * @property {number} timestamp - timestamp in msec or ISO string date\n   * @property {XRAnalyticRecordData} data - user position and direction on the scene. Can contain any additional custom fields.\n   */\n  export interface UserPositionRecord extends RecordBase {\n    eventType: EventTypes.UserPosition;\n  }\n\n  /**\n   * XR Analytic Log UserInteractionRecord\n   * @typedef {object} XRAnalyticRecord\n   * @property {string} eventType - EventTypes.UserPosition event type\n   * @property {string} appkey - project API key\n   * @property {string} apiver - expected to be `'v2'`\n   * @property {string} sessionId - session uuid\n   * @property {number} timestamp - timestamp in msec or ISO string date\n   * @property {XRAnalyticUserEvent} userEvent - required field describing event, actual for `event.user.interaction` events\n   * @property {XRAnalyticRecordData} data - user position and direction on the scene. Can contain any additional custom fields.\n   */\n  export interface UserInteractionRecord extends RecordBase {\n    eventType: EventTypes.UserInteraction;\n    userEvent: UserEvent;\n  }\n\n  /**\n   * XR Analytic Log Record\n   * @typedef {object} XRAnalyticRecord\n   * @property {string} eventType - supported event types\n   * @property {string} appkey - project API key\n   * @property {string} apiver - expected to be `'v2'`\n   * @property {string} sessionId - session uuid\n   * @property {number} timestamp - timestamp in msec or ISO string date\n   * @property {XRAnalyticUserEvent} userEvent - field describing event, actual for `event.user.interaction` events\n   * @property {XRAnalyticUserMetadata} userMeta - field describing client metadata, actual for `event.user.session.start` and `event.user.session.update` events\n   * @property {XRAnalyticUserCamera} camera - field describing user camera, actual for `event.user.session.start` and `event.user.session.update` events\n   * @property {XRAnalyticRecordData} data - user position and direction on the scene. Can contain any additional custom fields.\n   */\n  export type Record =\n    | SessionStartRecord\n    | SessionUpdateRecord\n    | SessionEndRecord\n    | UserPositionRecord\n    | UserInteractionRecord;\n\n  /**\n   * XR Analytic Log Batch Records\n   * @typedef {object} XRAnalyticBatchRecord\n   * @property {string} appkey - project API key\n   * @property {string} apiver - expected to be `'v2'`\n   * @property {array<XRAnalyticRecord>} items - array of individual events\n   */\n  export interface BatchRecord {\n    object: string;\n    appkey: string;\n    apiver: string;\n    items: Record[];\n  }\n}\n","export function deepEqual(x: any, y: any): boolean {\n  const ok = Object.keys;\n  const tx = typeof x;\n  const ty = typeof y;\n\n  return x && y && tx === 'object' && tx === ty ? ok(x).length === ok(y).length && ok(x).every(key => deepEqual(x[key], y[key])) : x === y;\n}\n\nexport function isObject(item: any): item is Object {\n  return item && typeof item === 'object' && !Array.isArray(item);\n}\n\nexport function mergeDeep(target: any, source: any) {\n  let output = Object.assign({}, target);\n  if (isObject(target) && isObject(source)) {\n    Object.keys(source).forEach(key => {\n      if (isObject(source[key])) {\n        if (!(key in target)) Object.assign(output, { [key]: source[key] });\n        else output[key] = mergeDeep(target[key], source[key]);\n      } else {\n        Object.assign(output, { [key]: source[key] });\n      }\n    });\n  }\n  return output;\n}\n","const _lut = [];\n\nfor ( let i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nlet _seed = 1234567;\n\n\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 180 / Math.PI;\n\n// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\nfunction generateUUID() {\n\n\tconst d0 = Math.random() * 0xffffffff | 0;\n\tconst d1 = Math.random() * 0xffffffff | 0;\n\tconst d2 = Math.random() * 0xffffffff | 0;\n\tconst d3 = Math.random() * 0xffffffff | 0;\n\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\treturn uuid.toUpperCase();\n\n}\n\nfunction clamp( value, min, max ) {\n\n\treturn Math.max( min, Math.min( max, value ) );\n\n}\n\n// compute euclidian modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\nfunction euclideanModulo( n, m ) {\n\n\treturn ( ( n % m ) + m ) % m;\n\n}\n\n// Linear mapping from range <a1, a2> to range <b1, b2>\nfunction mapLinear( x, a1, a2, b1, b2 ) {\n\n\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n}\n\n// https://www.gamedev.net/tutorials/programming/general-and-gameplay-programming/inverse-lerp-a-super-useful-yet-often-overlooked-function-r5230/\nfunction inverseLerp( x, y, value ) {\n\n\tif ( x !== y ) {\n\n\t\treturn ( value - x ) / ( y - x );\n\n\t} else {\n\n\t\treturn 0;\n\n\t}\n\n}\n\n// https://en.wikipedia.org/wiki/Linear_interpolation\nfunction lerp( x, y, t ) {\n\n\treturn ( 1 - t ) * x + t * y;\n\n}\n\n// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\nfunction damp( x, y, lambda, dt ) {\n\n\treturn lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n}\n\n// https://www.desmos.com/calculator/vcsjnyz7x4\nfunction pingpong( x, length = 1 ) {\n\n\treturn length - Math.abs( euclideanModulo( x, length * 2 ) - length );\n\n}\n\n// http://en.wikipedia.org/wiki/Smoothstep\nfunction smoothstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * ( 3 - 2 * x );\n\n}\n\nfunction smootherstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n}\n\n// Random integer from <low, high> interval\nfunction randInt( low, high ) {\n\n\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n}\n\n// Random float from <low, high> interval\nfunction randFloat( low, high ) {\n\n\treturn low + Math.random() * ( high - low );\n\n}\n\n// Random float from <-range/2, range/2> interval\nfunction randFloatSpread( range ) {\n\n\treturn range * ( 0.5 - Math.random() );\n\n}\n\n// Deterministic pseudo-random float in the interval [ 0, 1 ]\nfunction seededRandom( s ) {\n\n\tif ( s !== undefined ) _seed = s % 2147483647;\n\n\t// Park-Miller algorithm\n\n\t_seed = _seed * 16807 % 2147483647;\n\n\treturn ( _seed - 1 ) / 2147483646;\n\n}\n\nfunction degToRad( degrees ) {\n\n\treturn degrees * DEG2RAD;\n\n}\n\nfunction radToDeg( radians ) {\n\n\treturn radians * RAD2DEG;\n\n}\n\nfunction isPowerOfTwo( value ) {\n\n\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n}\n\nfunction ceilPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction floorPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction setQuaternionFromProperEuler( q, a, b, c, order ) {\n\n\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t// rotations are applied to the axes in the order specified by 'order'\n\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t// angles are in radians\n\n\tconst cos = Math.cos;\n\tconst sin = Math.sin;\n\n\tconst c2 = cos( b / 2 );\n\tconst s2 = sin( b / 2 );\n\n\tconst c13 = cos( ( a + c ) / 2 );\n\tconst s13 = sin( ( a + c ) / 2 );\n\n\tconst c1_3 = cos( ( a - c ) / 2 );\n\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\tconst c3_1 = cos( ( c - a ) / 2 );\n\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\tswitch ( order ) {\n\n\t\tcase 'XYX':\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YZY':\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZXZ':\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'XZX':\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YXY':\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZYZ':\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t}\n\n}\n\n\n\n\nexport {\n\tDEG2RAD,\n\tRAD2DEG,\n\tgenerateUUID,\n\tclamp,\n\teuclideanModulo,\n\tmapLinear,\n\tinverseLerp,\n\tlerp,\n\tdamp,\n\tpingpong,\n\tsmoothstep,\n\tsmootherstep,\n\trandInt,\n\trandFloat,\n\trandFloatSpread,\n\tseededRandom,\n\tdegToRad,\n\tradToDeg,\n\tisPowerOfTwo,\n\tceilPowerOfTwo,\n\tfloorPowerOfTwo,\n\tsetQuaternionFromProperEuler,\n};\n","import * as MathUtils from './MathUtils.js';\nimport { Quaternion } from './Quaternion.js';\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\trandomDirection() {\n\n\t\t// Derived from https://mathworld.wolfram.com/SpherePointPicking.html\n\n\t\tconst u = ( Math.random() - 0.5 ) * 2;\n\t\tconst t = Math.random() * Math.PI * 2;\n\t\tconst f = Math.sqrt( 1 - u ** 2 );\n\n\t\tthis.x = f * Math.cos( t );\n\t\tthis.y = f * Math.sin( t );\n\t\tthis.z = u;\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\n\t}\n\n}\n\nVector3.prototype.isVector3 = true;\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\nexport { Vector3 };\n","import * as MathUtils from './MathUtils.js';\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerp( qa, qb, qm, t ) {\n\n\t\tconsole.warn( 'THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead.' );\n\t\treturn qm.slerpQuaternions( qa, qb, t );\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < Number.EPSILON ) {\n\n\t\t\t// vFrom and vTo point in opposite directions\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerpQuaternions( qa, qb, t ) {\n\n\t\tthis.copy( qa ).slerp( qb, t );\n\n\t}\n\n\trandom() {\n\n\t\t// Derived from http://planning.cs.uiuc.edu/node198.html\n\t\t// Note, this source uses w, x, y, z ordering,\n\t\t// so we swap the order below.\n\n\t\tconst u1 = Math.random();\n\t\tconst sqrt1u1 = Math.sqrt( 1 - u1 );\n\t\tconst sqrtu1 = Math.sqrt( u1 );\n\n\t\tconst u2 = 2 * Math.PI * Math.random();\n\n\t\tconst u3 = 2 * Math.PI * Math.random();\n\n\t\treturn this.set(\n\t\t\tsqrt1u1 * Math.cos( u2 ),\n\t\t\tsqrtu1 * Math.sin( u3 ),\n\t\t\tsqrtu1 * Math.cos( u3 ),\n\t\t\tsqrt1u1 * Math.sin( u2 ),\n\t\t);\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nQuaternion.prototype.isQuaternion = true;\n\nexport { Quaternion };\n","import { Quaternion } from './Quaternion.js';\nimport { Vector3 } from './Vector3.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { clamp } from './MathUtils.js';\n\nconst _matrix = /*@__PURE__*/ new Matrix4();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\nclass Euler {\n\n\tconstructor( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget order() {\n\n\t\treturn this._order;\n\n\t}\n\n\tset order( value ) {\n\n\t\tthis._order = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, order = this._order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t}\n\n\tcopy( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m, order = this._order, update = true ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update === true ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromQuaternion( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t}\n\n\tsetFromVector3( v, order = this._order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order );\n\n\t}\n\n\treorder( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion, newOrder );\n\n\t}\n\n\tequals( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t}\n\n\tfromArray( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t}\n\n\ttoVector3( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nEuler.prototype.isEuler = true;\n\nEuler.DefaultOrder = 'XYZ';\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nexport { Euler };\n","import { Vector3 } from './Vector3.js';\n\nclass Matrix4 {\n\n\tconstructor() {\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( xy, xz, yx, yz, zx, zy ) {\n\n\t\tthis.set(\n\n\t\t\t1, yx, zx, 0,\n\t\t\txy, 1, zy, 0,\n\t\t\txz, yz, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nMatrix4.prototype.isMatrix4 = true;\n\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nexport { Matrix4 };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { ANode, Component } from 'aframe';\nimport { PerspectiveCamera } from 'three/src/cameras/PerspectiveCamera';\nimport { DEFAULT_INTERVAL_VALUE } from '../constants';\nimport MetalitixLoggerBase from './mtx-poll-base';\nimport { Vector3 } from 'three/src/math/Vector3';\nimport { Euler } from 'three/src/math/Euler';\nimport { Quaternion } from 'three/src/math/Quaternion';\nimport { MetalitixLoggerOptions } from '../types';\n\nclass MetalitixLogger extends MetalitixLoggerBase<ANode> {\n  private vector3: Vector3;\n  private euler: Euler;\n  private quaternion: Quaternion;\n\n  constructor(appKey: string, options: MetalitixLoggerOptions = {}) {\n    super(appKey, options);\n\n    this.vector3 = new Vector3();\n    this.euler = new Euler();\n    this.quaternion = new Quaternion();\n  }\n\n  protected getPositionData = (scene: ANode | null) => {\n    const camera = (scene?.closestScene().camera as PerspectiveCamera) ?? null;\n    if (camera === null) {\n      return undefined;\n    }\n    camera.getWorldPosition(this.vector3);\n    camera.getWorldQuaternion(this.quaternion);\n    this.euler.setFromQuaternion(this.quaternion);\n\n    return {\n      position: { x: this.vector3.x, y: this.vector3.y, z: this.vector3.z },\n      direction: { x: this.euler.x, y: this.euler.y, z: this.euler.z },\n    };\n  };\n\n  protected getCameraData = (scene: ANode | null) => {\n    const camera = (scene?.closestScene().camera as PerspectiveCamera) ?? null;\n    if (camera === null) {\n      return undefined;\n    }\n    return {\n      fieldOfView: camera.fov,\n      aspectRatio: camera.aspect,\n      zNearPlane: camera.near,\n      zFarPlane: camera.far,\n    };\n  };\n}\n\nconst MetalitixLoggerAFRAME: Partial<Component> & { logger?: MetalitixLogger } = {\n  schema: {\n    interval: { default: DEFAULT_INTERVAL_VALUE },\n    appkey: { default: 'test-appkey-1234-qwertyuiop' },\n  },\n  init() {\n    this.logger = new MetalitixLogger(this.data.appkey, { pollInterval: this.data.interval });\n    this.logger.startSession(this.el as ANode);\n  },\n  pause() {\n    this.logger?.pauseSession();\n  },\n  play() {\n    this.logger?.resumeSession();\n  },\n  remove() {\n    this.logger?.endSession();\n  },\n};\n\nAFRAME.registerComponent('metalitix-logger', MetalitixLoggerAFRAME);\n\nexport default MetalitixLogger;\n"],"names":["root","factory","exports","module","define","amd","self","MetalitixLoggerBase","constructor","appKey","options","interval","DEFAULT_INTERVAL_VALUE","customData","object3D","setPollInterval","pollInterval","this","Math","min","MAX_INTERVAL_VALUE","max","MIN_INTERVAL_VALUE","setCustomField","key","value","removeCustomField","getRecord","eventType","sessionId","userEvent","userMeta","camera","data","resultData","Object","assign","base","object","appkey","apiver","apiVersion","timestamp","Date","now","XRAnalytics","console","assert","undefined","Error","addRecord","record","pollRecords","push","sendPosition","sendAll","pollInProgress","items","slice","MAXIMUM_BATCH_RECORDS_LENGTH","batchRecordsData","sendXRAnalyticsData","length","lastPollTimestamp","error","log","forceStopLoop","getUserMeta","userAgent","window","navigator","pagePath","location","pathname","pageQuery","search","addSessionStart","getPositionData","getCameraData","previousCameraData","addSessionEnd","deepEqual","addUserPosition","addSessionUpdate","sddNextUserPositionAndUpdateCameraIfNeeded","sendPositionLoop","start","MAXIMUM_BATCH_SENDING_INTERVAL","nextPoll","setTimeout","clearTimeout","clearSessionPollRecords","handleVisibilityChange","document","visibilityState","pauseSession","resumeSession","startSession","generateUUID","addEventListener","MAXIMUM_SESSION_KEEPALIVE_TIME","endSession","removeEventListener","updateUserMeta","sendUserEvent","eventName","target","points","params","logCustomEvent","logKeyDownEvent","x","y","state","position","logKeyPressEvent","logKeyUpEvent","logMouseEnterEvent","logMouseLeaveEvent","logMouseOverEvent","logMouseOutEvent","logMouseDownEvent","logMouseUpEvent","logMouseMoveEvent","logMousePressEvent","logTouchTapEvent","logTouchStartEvent","logTouchMoveEvent","logTouchEndEvent","logZoomStartEvent","logZoomUpdateEvent","logZoomEndEvent","fetch","API_URL","method","keepalive","headers","body","JSON","stringify","isProduction","isStaging","API_ORIGIN","API_VERSION","PointStates","UserInteractionTypes","EventTypes","KnownPointStates","values","KnownUserInteractionTypes","KnownEventTypes","ok","keys","tx","every","isObject","item","Array","isArray","mergeDeep","source","output","forEach","_lut","i","toString","_seed","DEG2RAD","PI","RAD2DEG","d0","random","d1","d2","d3","toUpperCase","clamp","euclideanModulo","n","m","mapLinear","a1","a2","b1","b2","inverseLerp","lerp","t","damp","lambda","dt","exp","pingpong","abs","smoothstep","smootherstep","randInt","low","high","floor","randFloat","randFloatSpread","range","seededRandom","s","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","pow","ceil","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","q","a","b","c","order","cos","sin","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","set","warn","Vector3","z","setScalar","scalar","setX","setY","setZ","setComponent","index","getComponent","clone","copy","v","add","w","addVectors","addScalar","addScaledVector","sub","subVectors","subScalar","multiply","multiplyVectors","multiplyScalar","applyEuler","euler","isEuler","applyQuaternion","_quaternion","setFromEuler","applyAxisAngle","axis","angle","setFromAxisAngle","applyMatrix3","e","elements","applyNormalMatrix","normalize","applyMatrix4","qx","qy","qz","qw","ix","iy","iz","iw","project","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","divide","divideScalar","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","dot","lengthSq","sqrt","manhattanLength","setLength","alpha","lerpVectors","v1","v2","cross","crossVectors","ax","ay","az","bx","by","bz","projectOnVector","denominator","projectOnPlane","planeNormal","_vector","reflect","normal","angleTo","theta","acos","distanceTo","distanceToSquared","dx","dy","dz","manhattanDistanceTo","setFromSpherical","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","sx","setFromMatrixColumn","sy","sz","fromArray","setFromMatrix3Column","equals","array","offset","toArray","fromBufferAttribute","attribute","getX","getY","getZ","randomDirection","u","f","Symbol","iterator","prototype","isVector3","Quaternion","_x","_y","_z","_w","static","qa","qb","qm","slerpQuaternions","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","Number","EPSILON","len","atan2","tDir","_onChangeCallback","quaternion","update","_order","c1","c3","s1","s3","halfAngle","setFromRotationMatrix","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","vFrom","vTo","r","rotateTowards","step","slerp","identity","invert","conjugate","l","p","multiplyQuaternions","premultiply","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","u1","sqrt1u1","sqrtu1","u2","u3","getW","_onChange","callback","isQuaternion","_matrix","Matrix4","Euler","DefaultOrder","asin","setFromQuaternion","makeRotationFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","RotationOrders","arguments","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","me","copyPosition","setFromMatrix3","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","_v1","scaleY","scaleZ","makeRotationFromEuler","d","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","compose","_zero","_one","lookAt","eye","up","multiplyMatrices","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","determinant","transpose","tmp","setPosition","t11","t12","t13","t14","det","detInv","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","ty","makeScale","makeShear","xy","xz","yx","yz","zx","zy","x2","y2","z2","xx","yy","zz","wx","wy","wz","decompose","_m1","invSX","invSY","invSZ","makePerspective","left","right","top","bottom","near","far","makeOrthographic","h","matrix","isMatrix4","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","o","defineProperty","enumerable","get","obj","prop","hasOwnProperty","call","toStringTag","MetalitixLogger","super","scene","closestScene","getWorldPosition","vector3","getWorldQuaternion","direction","fieldOfView","fov","aspectRatio","aspect","zNearPlane","zFarPlane","MetalitixLoggerAFRAME","schema","default","init","logger","el","pause","play","remove","AFRAME","registerComponent"],"sourceRoot":""}